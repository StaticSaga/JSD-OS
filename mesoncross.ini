[constants]
common_flags = [
		'-target', 'i386-unknown-elf',
		'-Wuninitialized',
		'-Wall',
		'-fno-unwind-tables',
		'-fno-asynchronous-unwind-tables',
		'-march=i386',
		'-O2',
		'-mno-sse',
		'-mno-mmx',
		'-fomit-frame-pointer',
		'-I ./',
		'-Werror=implicit-function-declaration',
		'-flto',
		'-D__I386_ONLY',
		'-D__KERNEL',
	]
[binaries]
c = 'clang'
c_ld = 'lld'
cpp_ld = 'lld'
cpp = 'clang++'

[properties]
needs_exe_wrapper = true

[built-in options]
c_args = common_flags + [
		'-std=c99',
		'-Wc++-compat',
	]
cpp_args = common_flags + [
		'-std=c++20',
		'-fno-rtti',
		'-fno-exceptions',
	]
c_link_args = [
		'--target=i386-elf',
		'-L./',
		'-l:libclang_rt.builtins-i386.a',
		'-Wl,--lto-O2',
		'-Wl,-N',
		'-O2',
		'-Ttext=0xF000',
		'-T linker.ld',
		'-Wl,-mllvm,-align-all-nofallthru-blocks=2',
		'-nostdlib',
	]
cpp_link_args = c_link_args

[host_machine]
system = 'jsd-os'
cpu_family = 'x86'
cpu = 'i386'
endian = 'little'
